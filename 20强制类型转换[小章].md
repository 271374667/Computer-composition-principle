# 强制类型转换

## short转换成无符号数的unsigned short

> 无符号数与有符号数不改变数据内容，而改变解释方式

```C
short x=-4321; //short占两个字节
unsigned short y = (unsigned short)x;
```

此时我们可以得知$x =\underline{1}110 \, 1111 \, 0001 \, 1111$这里第一位的1是符号位,所以我们这个值等于4321
但是如果改为unsigned的类型,我们的x依旧等于$1110 \,1111\,0001\,1111$但是我们的第一位不再是符号位，而是数值位，那么此时我们的x就变成了61215

## 当大的类型转换成小的类型

> C语言会直接高位截断，然后只保留低位

```C
int a=165537 , b=-34991; // int类型占4个字节
short c=(short)a, d=(short)b; // short类型占2个字节
```

$$
&a &= &0x0002 \; 86a1 (只保留后面4位)\\
&c &= &0x86a1(真值-31071,原来的值165537)
$$

$$
b&=&0xffff \; 7751(只保留后面两位)\\
d&=&0x7751(真值30545,原来的值-34991)\\
$$

## 当小的类型转换成大的类型

> 会在高位补位

![image-20220419153433915](https://pic.imgdb.cn/item/625e662f239250f7c566ba72.png)